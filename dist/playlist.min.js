/*! playlist.js v0.0.1 - MIT license 
2014-11-23 - Florent Solt */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){window.Playlist=a("./core"),window.$(function(){Playlist.ui.discover()})},{"./core":2}],2:[function(a,b){"use strict";{var c=b.exports.ui=a("./ui"),d=function(){},e={index:0,audio:new Audio,songs:[],loop:!0,events:{play:d,pause:d,stop:d,mute:d,unmute:d,next:d,prev:d,time:d}};b.exports.setSongs=function(a){Array.isArray(a)?a.forEach(function(a){"string"==typeof a.src&&"string"==typeof a.title&&"string"==typeof a.artwork?e.songs.push(a):console.log("Invalid song (src, title or artwork property missing or invalid).",a)}):console.log("Playlist.setSongs only accet array of songs.")}}b.exports.on=function(a,b){"function"==typeof b?e.events[a]?e.events[a]=b:console.log("Unknown event: "+a):console.log("Playlist.on needs a funciton as 2nd argument.")},b.exports.getSongs=function(){return e.songs};{var f=(b.exports.setVolume=function(a){"number"==typeof a?a>=0&&100>=a?e.audio.volume=a/100:console.log("Volume should be between 0 and 100."):console.log("Invalid index.")},b.exports.isPlaying=function(){return!e.audio.paused},b.exports.play=function(){e.audio.src||(e.audio.src=e.songs[e.index].src),e.audio.play(),c.update(e.songs[e.index]),e.events.play(e.songs[e.index])}),g=(b.exports.stop=function(){e.audio.pause(),e.audio.currentTime=0,e.events.stop()},b.exports.pause=function(){e.audio.pause(),c.update(e.songs[e.index]),e.events.pause()},b.exports.next=function(){e.loop?e.index=(e.index+1)%e.songs.length:(e.index++,e.index>e.songs.length&&(e.index=e.songs.length-1)),e.audio.src=e.songs[e.index].src,f(),e.events.next()});b.exports.prev=function(){e.loop?e.index=(e.songs.length+e.index-1)%e.songs.length:(e.index++,e.index<0&&(e.index=0)),e.audio.src=e.songs[e.index].src,f(),e.events.prev()},b.exports.shuffle=function(){for(var a,b,c=e.songs.length;c;a=Math.floor(Math.random()*c),b=e.songs[--c],e.songs[c]=e.songs[a],e.songs[a]=b);}}b.exports.setLoop=function(a){e.loop=!!a};var h=function(){var a=e.audio.currentTime||0,b=e.audio.duration||0,d={current:{seconds:(Math.floor(a%60)<10?"0":"")+Math.floor(a%60),minutes:Math.floor(a/60)},duration:{seconds:(Math.floor(b%60)<10?"0":"")+Math.floor(b%60),minutes:Math.floor(b/60)}};d.current.text=d.current.minutes+":"+d.current.seconds,d.duration.text=d.duration.minutes+":"+d.duration.seconds,c.time(d),e.events.time(d)};e.audio.addEventListener("timeupdate",function(){h()}),e.audio.addEventListener("ended",function(){g()})},{"./ui":3}],3:[function(a,b){"use strict";var c=a("./core"),d={title:null,artwork:null,play:null,next:null,prev:null,stop:null,volume:null,mute:null,time:null};b.exports.discover=function(a){a=a||"#player",window.$.each(d,function(b){d[b]=window.$(a+" ."+b)}),d.artwork.css({"background-size":"cover","background-position":"50% 50%"}),d.play.click(function(){c.isPlaying()?c.pause():c.play()}),d.next.click(c.next),d.prev.click(c.prev)},b.exports.update=function(a){d.title.text(a.title),d.artwork.css("background-image","url("+a.artwork+")"),c.isPlaying()?d.play.removeClass("fa-play").addClass("fa-pause"):d.play.removeClass("fa-pause").addClass("fa-play")},b.exports.time=function(a){d.time.find(".current").text(a.current.text),d.time.find(".duration").text(a.duration.text)}},{"./core":2}]},{},[1,2,3]);